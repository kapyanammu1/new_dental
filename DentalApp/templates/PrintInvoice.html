{% extends 'base.html' %}
{% load static %}
{% block content %}
<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
	<!--begin::Toolbar container-->
	<div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
		<!--begin::Page title-->
		<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
			<!--begin::Title-->
			<h1 class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0">Invoice 3</h1>
			<!--end::Title-->
			<!--begin::Breadcrumb-->
			<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
				<!--begin::Item-->
				<li class="breadcrumb-item text-muted">
					<a href="{% static 'index' %}" class="text-muted text-hover-primary">Home</a>
				</li>
				<!--end::Item-->
				<!--begin::Item-->
				<li class="breadcrumb-item">
					<span class="bullet bg-gray-500 w-5px h-2px"></span>
				</li>
				<!--end::Item-->
				<!--begin::Item-->
				<li class="breadcrumb-item text-muted">Invoice Manager</li>
				<!--end::Item-->
				<!--begin::Item-->
				<li class="breadcrumb-item">
					<span class="bullet bg-gray-500 w-5px h-2px"></span>
				</li>
				<!--end::Item-->
				<!--begin::Item-->
				<li class="breadcrumb-item text-muted">View Invoices</li>
				<!--end::Item-->
			</ul>
			<!--end::Breadcrumb-->
		</div>
		<!--end::Page title-->
	</div>
	<!--end::Toolbar container-->
</div>
<!--end::Toolbar-->
<!--begin::Content-->
<div id="kt_app_content" class="app-content flex-column-fluid">
	<!--begin::Content container-->
	<div id="kt_app_content_container" class="app-container container-xxl">
		<!-- begin::Invoice 3-->
		<div class="card">
			<!-- begin::Body-->
			<div class="card-body py-20">
				<!-- begin::Wrapper-->
				<div class="mw-lg-950px mx-auto w-100">
					<!-- begin::Header-->
					<div id="printnatin">
						<div class="d-flex justify-content-between flex-column flex-sm-row mb-19">
							<h4 class="fw-bolder text-gray-800 fs-2qx pe-5 pb-7">INVOICE</h4>
							<!--end::Logo-->
							<div class="text-sm-end">
								<!--begin::Logo-->
								<a href="#" class="d-block mw-150px ms-sm-auto">
									{% if clinic_info.logo %}
										<img alt="Logo" src="{{ clinic_info.logo }}" class="w-50" />
									{% else %}
										<img alt="Logo" src="" class="w-100" />
									{% endif %}
								</a>
								<!--end::Logo-->
								<!--begin::Text-->
								<div class="text-sm-end fw-semibold fs-4 text-muted mt-7">
									<div>Capatan, Tuguegarao City, Cagayan</div>
									<div>Philippines</div>
								</div>
								<!--end::Text-->
							</div>
						</div>
						<!--end::Header-->
						<!--begin::Body-->
						<div class="pb-12">
							<!--begin::Wrapper-->
							<div class="d-flex flex-column gap-7 gap-md-10">
								<div class="separator"></div>
								<!--begin::Separator-->
								<!--begin::Order details-->
								<div class="d-flex flex-column flex-sm-row gap-7 gap-md-10 fw-bold">
									<div class="flex-root d-flex flex-column">
										<span class="text-muted fw-bolder text-gray-800 fs-2qx pe-5 pb-7">Invoice #: {{ invoices.invoice_number }}</span>
										<!-- <span class="fs-5">{{ invoices.invoice_number }}</span> -->
									</div>
								</div>
								<!--end::Order details-->
								<!--begin::Billing & shipping-->
								<div class="d-flex flex-column flex-sm-row gap-7 gap-md-10 fw-bold">
									<div class="flex-root d-flex flex-column">
										<span class="text-muted">Patient Name</span>
										<span class="fs-6">{{ invoices.patient }}</span>
									</div>
									<div class="text-sm-end flex-root d-flex flex-column">
										<span class="text-muted">Date</span>
										<span class="fs-5">{{ invoices.invoice_date|date:"F j, Y" }}</span>
									</div>
								</div>
								
								<!--end::Billing & shipping-->
								<!--begin:Order summary-->
								<div class="d-flex justify-content-between flex-column">
									<!--begin::Table-->
									<div class="separator"></div>
									<div class="table-responsive border-bottom mb-9">
										<table class="table align-middle table-row-dashed fs-6 gy-5 mb-0">
											<thead>
												<tr class="border-bottom fs-6 fw-bold text-muted">
													<th class="min-w-175px pb-2">Products</th>
													<th class="min-w-70px text-end pb-2">QTY</th>
													<th class="min-w-80px text-end pb-2">PRICE</th>
													<th class="min-w-100px text-end pb-2">Total</th>
												</tr>
											</thead>
											<tbody class="fw-semibold text-gray-600">
												{% for a in items %}
												<tr>
													<td>
														<div class="fw-bold">{{ a.item.treatment }}</div>
													</td>
													<td class="text-end">{{ a.item.qty }}</td>
													<td class="text-end">₱{{ a.item.price }}</td>
													<td class="text-end">₱{{ a.total }}</td>
												</tr>
												{% endfor %}
												<tr>
													<td colspan="3" class="fs-3 text-gray-900 fw-bold text-end">Grand Total</td>
													<td class="text-gray-900 fs-3 fw-bolder text-end">₱{{ invoices.total_sum }}</td>
												</tr>
											</tbody>
										</table>
									</div>
									<!--end::Table-->
								</div>
								<!--end:Order summary-->
							</div>
							<!--end::Wrapper-->
						</div>
					</div>
					<!--end::Body-->
					<!-- begin::Footer-->
					<div class="d-flex flex-stack flex-wrap mt-lg-20 pt-13">
						<!-- begin::Actions-->
						<div class="my-1 me-5">
							<!-- begin::Pint-->
							<button type="button" class="btn btn-success my-1 me-12" onclick="printDiv()">Print Invoice</button>
							<!-- end::Pint-->
							<!-- begin::Download-->
							<!-- <button type="button" class="btn btn-light-success my-1">Download</button> -->
							<!-- end::Download-->
						</div>
						<!-- end::Actions-->
						<!-- begin::Action-->
						<!-- <a href="apps/invoices/create.html" class="btn btn-primary my-1">Create Invoice</a> -->
						<!-- end::Action-->
					</div>
					<!-- end::Footer-->
				</div>
				<!-- end::Wrapper-->
			</div>
			<!-- end::Body-->
		</div>
		<!-- end::Invoice 1-->
	</div>
	<!--end::Content container-->
</div>
<script>
	function printDiv() {
		var printContents = document.getElementById('printnatin').innerHTML;
		var originalContents = document.body.innerHTML;

		document.body.innerHTML = "<div id='printable-content'>" + printContents + "</div>";
		window.print();
		document.body.innerHTML = originalContents;
	}
</script>
{% endblock %}